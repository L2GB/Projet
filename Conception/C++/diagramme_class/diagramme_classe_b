@startuml

hide circle

class Transmitter
class Object
class ObjectManager
class PowerPlug
class Heater
class Thermostat
class OCC
class ZWaveController
class BDCC
class RACC
class Socket

abstract class DataObserver
abstract class DataObservable

abstract class Object{
	-Planning *m_planning
	+void setPlanning(Planning &planning)
	void run()
	abstract readFile()
	abstract writeFile()
}

class ObjectManager{
	+void day_set(json_t *_day)
	+void day_del(json_t *_day)
	+void week_set(json_t *_week)
	+void week_del(json_t *_week)
	void stop()
}

class Heater{
	readFile()
}	

class Thermostat{
	readFile()
}

class PowerPlug{
	readFile()
}

class RACC{
	+void receiveOrder(string _dataReceive, IdClient _idClient)
	+void sendData(string _data)
}

class Transmitter{
	+void executeOrder(string _order, json_t *data, IdClient _idClient)
	-void initializeMapping()
	-string createMessage(string _order, json_t *_data, string _message)
}

abstract class Communicator{
	+void attach(Transmission *_transmission)
}

abstract class Transmission{
	+{abstract} void executeOrder(string _order, json_t *data, IdClient _idClient)
}

class LocalFileManager{
		+{static} string getDays()
		+{static} string getWeeks()
		+{static} string getObjects()
		+{static} string getRooms()
		+{static} void setDay(json_t *_day)
		+{static} void setWeek(json_t *_week)
		+{static} void setObject(json_t *_object)
		+{static} void setRoom(json_t *_room)
		+{static} void rmDay(json_t *_day)
		+{static} void rmWeek(json_t *_week)
		+{static} void rmObject(json_t *_object)
		+{static} void rmRoom(json_t *_room)
}

class PlanningManager{
	-vector<Planning> m_planning
	-<vector> m_weeks
	-<vector> m_days
	
	+Planning getPlanning(string _name)
	+void day_set(string _name, vector<TimeSlot> _timeSlot)
	+void day_del(string _name)
	+void week_set(string _name, vector<Day> _days)
	+void week_del(string _name)
	+void planning_set(string _name, Week _week)
	+void planning_del(string _name)
}

class Planning{
	-Week m_week
 }

class Week{
	-string m_name
	-vector<Day> m_days
}

class Day{
	-string m_name
	-vector<TimeSlot> m_timeSlot
}

class TimeSlot{
	-bool m_permission
	-struct tm m_start
	-struct tm m_end
}

ObjectManager -->OCC
OCC-->ZWaveController
ObjectManager-up->Object

Object-up-|>Heater
Object-up-|>PowerPlug
Object-up-|>Thermostat



Transmitter -up-|> Transmission
Communicator -right-> Transmission

BDCC-up-|>Communicator
RACC-up-|>Communicator
ObjectManager -up-|> Communicator

Transmitter -left-> BDCC
Transmitter --> RACC
Transmitter --> ObjectManager
Transmitter --> LocalFileManager

RACC--|>DataObserver
RACC-->Socket
Socket--|>DataObservable
DataObservable-right->DataObserver

ObjectManager --> PlanningManager
PlanningManager "1" -down- "*" Planning
PlanningManager "1" -down- "*" Week
PlanningManager "1" -down- "*" Day
PlanningManager -down- TimeSlot
Planning "1" -left- "1" Week
Week "1" -left- "7" Day
Day -left- TimeSlot
Object "1" -left- "1" Planning

@enduml
